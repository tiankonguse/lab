(function(){var e="1.0",t="JxMark",n=this,i=n.Jx,a={},r={},s=[],o={NO_DEBUG:0,SHOW_ALL:1},l={debug:1},c=function(e,t,n){return e+="",l.debug&&this.console&&(this.console.out?this.console.out(e,t,n):alert(e+" - 消息类型["+n+"]")),e};try{if(!(i===undefined||i.mark&&i.mark===t))throw Error('"Jx" name is defined in other javascript code !!!');i&&(a=i.VERSIONS,r=i.PACKAGE,s=i.PACKAGES),i=function(e,t){var n=this;if(t)this._init();else if(e){e+="";try{if(!i.VERSIONS[e])throw n=i.VERSIONS[i.DEFAULT_VERSION],Error("没有找到 JET version "+e+", 所以返回默认版本 JET version "+i.DEFAULT_VERSION+"!");n=i.VERSIONS[e]}catch(a){n.out("A.错误：["+a.name+"] "+a.message+", "+a.fileName+", 行号:"+a.lineNumber+"; stack:"+typeof a.stack,2)}}else n=i.VERSIONS[i.DEFAULT_VERSION];return n},i.prototype={version:e,DEBUG:o,option:l,_init:function(){this.constructor=i},$namespace:function(e){var t,n,i=e.split("."),a=window;for(t=0;i.length>t;t+=1)n=i[t],a[n]=a[n]||{},a=a[i[t]];return a},$package:function(){var e,t=arguments[0],i=arguments[arguments.length-1],a=n;if("function"!=typeof i)throw Error("Function required");if("string"==typeof t){if(a=this.$namespace(t),r[t]);else{var o={isLoaded:!0,"package":a,returnValue:e};r[t]=o,s.push(o)}a.packageName=t}else"object"==typeof t&&(a=t);e=i.call(a,this)},checkPackage:function(e){return i.PACKAGES[e]},out:c,debug:function(){},profile:function(){},warn:function(){},error:function(){},startTime:+new Date,about:function(){return this.out("JET (Javascript Extend Tools)\nversion: "+this.version+"\n\nCopyright (c) 2009, All rights reserved.")},toString:function(){return"JET version "+this.version+" !"}},i.VERSIONS=a,i.PACKAGE=r,i.PACKAGES=s,i.VERSIONS[e]=new i(e,!0),i.DEFAULT_VERSION=e,i.mark=t,n.Jet=n.Jx=i}catch(u){c("JET 微内核初始化失败! B.错误：["+u.name+"] "+u.message+", "+u.fileName+", 行号:"+u.lineNumber+"; stack:"+typeof u.stack,1)}})(),Jx().$package(function(e){var t,n,i,a,r,s,o,l,c,u,d,h,p,f,m,g,v,y,A,b,x,S,w,P,E;t=function(e){return e===void 0},n=function(e){return null===e},i=function(e){return(0===e||e)&&e.constructor===Number},r=function(e){return(e===!1||e)&&e.constructor===Boolean},a=function(e){return(""===e||e)&&e.constructor===String},s=function(e){return e&&e.constructor===Object||"[object Object]"==e+""},o=function(e){return e&&e.constructor===Array||"[object Array]"===Object.prototype.toString.call(e)},l=function(e){return e&&e.callee&&i(e.length)?!0:!1},c=function(e){return e&&e.constructor===Function},u=function(e){return t(e)?"undefined":n(e)?"null":i(e)?"number":r(e)?"boolean":a(e)?"string":s(e)?"object":o(e)?"array":l(e)?"arguments":c(e)?"function":"other"},f=function(){return!0},m=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},v=function(e){var t=function(){};return t.prototype=e,new t},d=function(t){return e.isFunction(t)?t:function(){return t}},h=function(){var t,n,i=arguments.length;for(t=0;i>t;t++)try{n=arguments[t]();break}catch(a){e.out("C.错误：["+a.name+"] "+a.message+", "+a.fileName+", 行号:"+a.lineNumber+"; stack:"+typeof a.stack,2)}return n},g=function(e){var t,n,e,i,a=arguments;for(1===a.length?(e=this,t=0):(e=a[0]||{},t=1);arguments.length>t;t++){i=arguments[t];for(n in i){var r=e[n],l=i[n];r!==l&&(!l||!s(l)||o(l)||l.nodeType||c(l)?void 0!==l&&(e[n]=l):(r=e[n]||{},e[n]=g(r,l||(null!=l.length?[]:{}))))}}return e},y=function(){return+new Date},A=function(e,t,n,i,a){var r=e.concat(),s=25;i&&(r=e),window.setTimeout(function(){var i=+new Date;do t.call(n,r.shift());while(r.length>0&&50>+new Date-i);r.length>0?window.setTimeout(arguments.callee,s):a&&a(e)},s)},b=function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n},p=function(){},x=function(e,t){return t=t||{},e.$$rebuildedFunc=e.$$rebuildedFunc||function(){var n,i,a=this;return n=t.contextObj||a,i=Array.prototype.slice.call(arguments,0),void 0!==i&&(i=i.concat(t.arguments)),t.event===!1&&(i=i.slice(1)),e.apply(n,i)},e.$$rebuildedFunc},S=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);return function(){var i=this;return e.apply(i,n.concat(t.call(arguments)))}},w=function(e,t){var n=Array.prototype.slice,i=n.call(arguments,2);return function(){return e.apply(t,i.concat(n.call(arguments)))}},E=function(){var t=arguments.length,n=arguments[t-1];if(n.init=n.init||function(){},2===t){var i=arguments[0].extend,a=function(){};a.prototype=i.prototype;var r=function(){this.init.apply(this,arguments)};return r.superClass=i.prototype,r.callSuper=function(e,t){var n=Array.prototype.slice,i=n.call(arguments,2),t=r.superClass[t];t&&t.apply(e,i.concat(n.call(arguments)))},r.prototype=new a,r.prototype.constructor=r,e.extend(r.prototype,n),r.prototype.init=function(){n.init.apply(this,arguments)},r}if(1===t){var s=function(){return this.init.apply(this,arguments)};return s.prototype=n,s}};var C=new E({init:function(e,t,n,i,a){var r=e.concat(),s=25;i&&(r=e),this.timeout=window.setTimeout(function(){var i=+new Date;do t.call(n,r.shift());while(r.length>0&&50>+new Date-i);r.length>0?this.timeout=window.setTimeout(arguments.callee,s):a&&a(e)},s)},stop:function(){clearTimeout(this.timeout)}});e.isUndefined=t,e.isNull=n,e.isNumber=i,e.isString=a,e.isBoolean=r,e.isObject=s,e.isArray=o,e.isArguments=l,e.isFunction=c,e.$typeof=u,e.$return=d,e.$try=h,e.emptyFunc=p,e.clone=v,e.getLength=b,e.checkJSON=f,e.random=m,e.extend=g,e.now=y,e.timedChunk=A,e.rebuild=x,e.pass=S,e.bind=w,e.bindNoEvent=P,e.Class=E,e.Chunk=C}),Jx().$package(function(e){e.browserOptions={adjustBehaviors:!0,htmlClass:!0},e.host=window.location.host;var t,n,i,a,r,s=navigator.platform.toLowerCase(),o=navigator.userAgent.toLowerCase(),l=navigator.plugins;a=function(e,t){return e=(""+e).replace(/_/g,"."),t=t||1,e=(e+"").split("."),e=e[0]+"."+(e[1]||"0"),e=Number(e).toFixed(t)},t={getPlatform:function(){return s},name:void 0!=window.orientation?"iPod":(s.match(/mac|win|linux/i)||["unknown"])[0],version:0,iPod:0,iPad:0,iPhone:0,android:0,win:0,linux:0,mac:0,touchDevice:!1,set:function(e,t){this.name=e,this.version=t,this[e]=t}},t[t.name]=!0,(r=o.match(/windows ([\d.]+)/))?t.set("win",a(r[1])):(r=o.match(/windows nt ([\d.]+)/))?t.set("win",a(r[1])):(r=o.match(/linux ([\d.]+)/))?t.set("linux",a(r[1])):(r=o.match(/mac ([\d.]+)/))?t.set("mac",a(r[1])):(r=o.match(/ipod ([\d.]+)/))?t.set("iPod",a(r[1])):(r=o.match(/ipad[\D]*os ([\d_]+)/))?t.set("iPad",a(r[1])):(r=o.match(/iphone ([\d.]+)/))?t.set("iPhone",a(r[1])):(r=o.match(/android ([\d.]+)/))?t.set("android",a(r[1])):0,t.touchDevice="ontouchstart"in window,n={features:{xpath:!!document.evaluate,air:!!window.runtime,query:!!document.querySelector},getPlugins:function(){return l},plugins:{flash:function(){var e=0;if(l&&l.length){var t=l["Shockwave Flash"];t&&t.description&&(e=a(t.description.match(/\b(\d+)\.\d+\b/)[1],1)||e)}else for(var n=13;n--;)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+n),e=a(n);break}catch(i){}return e}()},getUserAgent:function(){return o},name:"unknown",version:0,ie:0,firefox:0,chrome:0,opera:0,safari:0,mobileSafari:0,adobeAir:0,set:function(e,t){this.name=e,this.version=t,this[e]=t}},(r=o.match(/msie ([\d.]+)/))?n.set("ie",a(r[1])):(r=o.match(/firefox\/([\d.]+)/))?n.set("firefox",a(r[1])):(r=o.match(/chrome\/([\d.]+)/))?n.set("chrome",a(r[1])):(r=o.match(/opera.([\d.]+)/))?n.set("opera",a(r[1])):(r=o.match(/adobeair\/([\d.]+)/))?n.set("adobeAir",a(r[1])):(r=o.match(/version\/([\d.]+).*safari/))?n.set("safari",a(r[1])):0,(r=o.match(/version\/([\d.]+).*mobile.*safari/))?n.set("mobileSafari",a(r[1])):0,t.iPad&&n.set("mobileSafari","0.0"),n.ie&&(document.documentMode?document.documentMode!==Math.floor(n.ie)&&n.set("ie",a(document.documentMode)):document.documentMode=Math.floor(n.ie)),//!!navigator.userAgent.match(/Apple.*Mobile.*Safari/);
i={name:"unknown",version:0,trident:0,gecko:0,webkit:0,presto:0,set:function(e,t){this.name=e,this.version=t,this[e]=t}},(r=o.match(/trident\/([\d.]+)/))?i.set("trident",a(r[1])):(r=o.match(/gecko\/([\d.]+)/))?i.set("gecko",a(r[1])):(r=o.match(/applewebkit\/([\d.]+)/))?i.set("webkit",a(r[1])):(r=o.match(/presto\/([\d.]+)/))?i.set("presto",a(r[1])):0,n.ie&&(6==n.ie?i.set("trident",a("4")):(7==n.ie||8==n.ie)&&i.set("trident",a("5")));var c=function(){if(n.ie&&7>n.ie)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}};e.browserOptions.adjustBehaviors&&c();var u=function(e){return(e+"").replace(/\./gi,"_")},d=function(){var e=document.documentElement,a=[e.className];a.push("javascriptEnabled"),a.push(t.name),a.push(t.name+u(t.version)),a.push(n.name),a.push(n.name+u(n.version)),document.documentMode&&a.push("documentMode_"+document.documentMode),a.push(i.name),a.push(i.name+u(i.version)),n.plugins.flash&&(a.push("flash"),a.push("flash"+u(n.plugins.flash))),window.webTop!==void 0&&window.webTop&&a.push("webTop"),e.className=a.join(" ")};e.browserOptions.htmlClass&&d(),e.platform=t,e.browser=n,e.browser.engine=i}),Jx().$package(function(e){var t,n,i,a,r,s,o,l,c,u,d,h,p,f,m,g,v,y,A,b,x,S,w,P,E,C,k,T,I,R,B,M,L,D,N,_,O,X,H,F,Y,V,W,G,z,Q,U,j,q,K,J,Z,$,et,tt,nt,it,at=null;e.dom=e.dom||{},t=e.dom,n=e.browser,$=t.win?t.win.contentWindow:t.win||window,t.win=$,t.doc=$.document;var rt=function(e){return e&&Object.prototype.hasOwnProperty.call(e,"classList")};et=function(){return tt?tt:tt="CSS1Compat"===document.compatMode?document.documentElement:document.body},J=function(e){return e?(e=e||window.document,at=9===e.nodeType?e:e.ownerDocument||t.doc):at?at:(e=e||window.document,at=9===e.nodeType?e:e.ownerDocument||t.doc)},Z=function(e){var n=J(e);return e.document?e:n.defaultView||n.parentWindow||t.win},nt=function(e){return it||(e=e||J(),it=e.getElementsByTagName("head")?e.getElementsByTagName("head")[0]:e.documentElement),it},i=function(e,t){return t=t||document,t.getElementById(e)},a=function(e,t){return J(t).getElementsByName(e)},r=function(e,t){var t=t||J();return t.getElementsByTagName(e)},s=function(e){var t=e?e[TEXT_CONTENT]:"";return t===UNDEFINED&&INNER_TEXT in e&&(t=e[INNER_TEXT]),t||""},o=function(t,n,i){var a,r=!1,s=n;do a=s.getAttribute(t),e.isUndefined(a)||e.isNull(a)?s===i?r=!0:s=s.parentNode:r=!0;while(!r);return a},l=function(e,t,n){var i,a=n?n.document:document,r=a.createElement(e),s={"class":function(){r.className=t["class"]},style:function(){b(r,t.style)}};for(i in t)s[i]?s[i]():r.setAttribute(i,t[i]);return r},c=function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.childNodes;return 0===n.length?null:1===n.length?n[0]:n},I=function(e){var t;return t=e?e.scrollHeight:Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),t||0},R=function(e){var t;return t=e?e.scrollWidth:Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),t||0},B=function(e){return e=e||et(),e.clientHeight},M=function(e){return e=e||et(),e.clientWidth},L=function(t){return e.browser.engine.name,t=t||et(),t.offsetHeight},D=function(t){return e.browser.engine.name,t=t||et(),t.offsetWidth},N=function(e){var t;return t=e?e.scrollLeft:Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),t||0},_=function(e){var t;return t=e?e.scrollTop:Math.max(document.documentElement.scrollTop,document.body.scrollTop),t||0},u=function(e,t){"string"==typeof e.className?e.className=t:e.setAttribute("class",t)},d=function(e){return"string"==typeof e.className?e.className:e.getAttribute("class")||""},h=function(){return function(e,t){return e&&t?rt(e)?e.classList.contains(t):(" "+d(e)+" ").indexOf(" "+t+" ")>-1:!1}}(),p=function(){return function(e,t){if(e&&t&&!h(e,t))if(rt(e))e.classList.add(t);else{var n=d(e);n+=" "+t,u(e,n)}}}(),f=function(){return function(e,t){if(e&&t&&h(e,t))if(rt(e))e.classList.remove(t);else{var n=d(e);n=n.replace(RegExp("(?:^|\\s)"+t+"(?:\\s|$)")," "),u(e,n)}}}(),m=function(){return function(e,t){e&&t&&(h(e,t)?f(e,t):p(e,t))}}(),g=function(e,t,n){f(e,t),p(e,n)},v=function(e,n,i){var a=t.node("style",{id:n||"",type:"text/css"});if(a.styleSheet)a.styleSheet.cssText=e;else{var r=document.createTextNode(e);a.appendChild(r)}return t.getDocHead(i).appendChild(a),a},y=function(t,n,i){if(t){var a=e.browser.name;if(("float"===n||"cssFloat"===n)&&(n="ie"===a?"styleFloat":"cssFloat"),"opacity"===n&&"ie"===a&&9>e.browser.ie){var r=100*i;return t.style.filter='alpha(opacity="'+r+'")',t.style.zoom||(t.style.zoom=1),void 0}t.style[n]=i}},A=function(t,n){if(t){var i=Z(t),a=e.browser.name;if(("float"===n||"cssFloat"===n)&&(n="ie"===a?"styleFloat":"cssFloat"),"opacity"===n&&"ie"===a&&9>e.browser.ie){var r=1,s=t.style.filter.match(/opacity=(\d+)/);return s&&s[1]&&(r=s[1]/100),r}if(t.style[n])return t.style[n];if(t.currentStyle)return t.currentStyle[n];if(i.getComputedStyle)return i.getComputedStyle(t,null)[n];if(document.defaultView&&document.defaultView.getComputedStyle){n=n.replace(/([/A-Z])/g,"-$1"),n=n.toLowerCase();var o=document.defaultView.getComputedStyle(t,"");return o&&o.getPropertyValue(n)}}},addStyles=function(e){var t,n;if(document.createStyleSheet)n=document.createStyleSheet();else{t=document.createElement("style");var i=document.getElementsByTagName("head")[0];i.appendChild(t),n=document.styleSheets[document.styleSheets.length-1]}var a=typeof e;if("string"==a)t?t.innerHTML=e:n.cssText=e;else if("object"==a){var r=0;for(selector in e)if(n.insertRule){var s=selector+"{"+e[selector]+"}";n.insertRule(s,r++)}else n.addRule(selector,e[selector],r++)}},S=function(e,t){e.style.cssText+=";"+t},b=function(e,t){e.style.cssText=t},x=function(e){return e.style.cssText},w=function(e,t){var n,i=e.getAttribute("_oldDisplay");n=i?i:A(e,"display"),t?y(e,"display",t):"none"===n?y(e,"display","block"):y(e,"display",n)},P=function(e){var t=A(e,"display");return"none"===t?!1:!0},E=function(e){var t,n=e.getAttribute("_oldDisplay");t=n?n:A(e,"display"),"none"===t?y(e,"display",""):y(e,"display",t)},C=function(e){var t=A(e,"display"),n=e.getAttribute("_oldDisplay");n||("none"===t?e.setAttribute("_oldDisplay",""):e.setAttribute("_oldDisplay",t)),y(e,"display","none")};var st=function(){for(var e=document.createElement("a").style,t=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],n=t.length;n--;)if(t[n]in e)return t[n]}();(function(){for(var e=document.createElement("a").style,t=["webkitTransition","MozTransition","OTransition","msTransition","Transition"],n=t.length;n--;)if(t[n]in e)return t[n]})(),k=function(e,t,n){var i=e.style[st]||"";switch(n){case"translate3d":case"translate3d-x":case"translate3d-y":case"translate3d-z":if(/translate3d\([^)]*\)/.test(i)||(i+=" translate3d(0px,0px,0px)"),"translate3d"!=n){var a={x:"$1",y:"$2",z:"$3"},r={"translate3d-x":"x","translate3d-y":"y","translate3d-z":"z"};a[r[n]]=t,t=a}i=i.replace(/translate3d\(([^,]*)px,([^,]*)px,([^,]*)px\)/,"translate3d("+t.x+"px,"+t.y+"px,"+t.z+"px)");break;case"translate":case"translate-x":case"translate-y":if(/translate\([^)]*\)/.test(i)||(i+=" translate(0px,0px)"),"translate"!=n){var a={x:"$1",y:"$2"},r={"translate3d-x":"x","translate3d-y":"y"};a[r[n]]=t,t=a}i=i.replace(/translate\(([^,]*)px,([^,]*)px\)/,"translate("+t.x+"px,"+t.y+"px)");break;case"scale":i=/scale\([^)]*\)/.test(i)?i.replace(/scale\([^)]*\)/,"scale("+t+")"):i+" scale("+t+")";break;case"rotate":i=/rotate\([^)]*\)/.test(i)?i.replace(/rotate\([^)]*\)/,"rotate("+t+"deg)"):i+" rotate("+t+"deg)";break;default:i=t}e.style[st]=i},T=function(e,t){var n=e.style[st]||"scale(1) translate(0px, 0px) translate3d(0px, 0px, 0px) rotate(0deg)";switch(t){case"scale":n=/scale\(([^)]*)\)/.exec(n),n=n?Number(n[1]):1;break;case"translate3d":case"translate3d-x":case"translate3d-y":case"translate3d-z":if(n=/translate3d\(([^,]*)px,([^,]*)px,([^,]*)px\)/.exec(n)||[0,0,0,0],"translate3d"!=t){var i={"translate3d-x":1,"translate3d-y":2,"translate3d-z":3};n=Number(n[i[t]])}else n={x:Number(n[1]),y:Number(n[2]),z:Number(n[3])};break;case"translate":case"translate-x":case"translate-y":if(n=/translate\(([^,]*)px,([^,]*)px\)/.exec(n)||[0,0,0],"translate"!=t){var i={"translate-x":1,"translate-y":2};n=Number(n[i[t]])}else n={x:Number(n[1]),y:Number(n[2])};break;case"rotate":n=/rotate\(([^)]*)deg\)/.exec(n),n=n?Number(n[1]):0;break;default:}return n},O=function(t){var n=0,i=0;if(t)if(document.documentElement.getBoundingClientRect&&t.getBoundingClientRect){var a={left:0,top:0,right:0,bottom:0};try{a=t.getBoundingClientRect()}catch(r){return[0,0]}var s=t.ownerDocument,o=e.browser.ie?2:0;n=a.top-o+_(s),i=a.left-o+N(s)}else for(;t.offsetParent;)n+=t.offsetTop,i+=t.offsetLeft,t=t.offsetParent;return[i,n]},X=function(e,t,n){t=parseInt(t)+N(),n=parseInt(n)+_(),F(e,t,n)},H=function(e){var t=O(e);return t[0]=t[0]+N(),t[1]=t[1]+_(),t},F=function(e,t,n){var i=parseInt(A(e,"marginLeft"))||0,a=parseInt(A(e,"marginTop"))||0;y(e,"left",parseInt(t)-i+"px"),y(e,"top",parseInt(n)-a+"px")},Y=function(e,t){var n=H(e),i=H(t),a=[];return a[0]=n[0]-i[0],a[1]=n[1]-i[1],a};var ot=function(e){return e&&"auto"!=e?parseInt(e.substr(0,e.length-2)):0};V=function(e){return ot(t.getStyle(e,"left"))},W=function(e){return ot(t.getStyle(e,"top"))},G=function(e){return ot(t.getStyle(e,"width"))},z=function(e){return ot(t.getStyle(e,"height"))},U=function(e){e=e||window;var t=e.document;return e.getSelection?""+e.getSelection():t.getSelection?t.getSelection():t.selection?t.selection.createRange().text:void 0},j=function(e){if(void 0!=e.selectionStart&&void 0!=e.selectionEnd){var t=e.selectionStart,n=e.selectionEnd;return e.value.substring(t,n)}return""},q=function(e,t,n){if(!n&&e===t)return!1;if(e.compareDocumentPosition){var i=e.compareDocumentPosition(t);if(20==i||0==i)return!0}else if(e.contains(t))return!0;return!1},K=function(e){var t;return t=n.ie&&7>=n.ie?e.getAttribute("href",4):e.href,t||null};for(var lt=r("script"),ct=0;lt.length>ct;ct++)"true"==lt[ct].getAttribute("hasJx")&&(e.src=lt[ct].src);e.src||(e.src=lt[lt.length-1].src),e.filename=e.src.replace(/(.*\/){0,}([^\\]+).*/gi,"$2"),e.path=e.src.split(e.filename)[0],t.getDoc=J,t.id=i,t.name=a,t.tagName=r,t.getText=s,t.getAttributeByParent=o,t.node=l,t.xnode=c,t.setClass=u,t.getClass=d,t.hasClass=h,t.addClass=p,t.removeClass=f,t.toggleClass=m,t.replaceClass=g,t.createStyleNode=v,t.setStyle=y,t.getStyle=A,t.addStyles=addStyles,t.setCssText=b,t.getCssText=x,t.addCssText=S,t.show=w,t.isShow=P,t.recover=E,t.hide=C,t.setTransform=k,t.getTransform=T,t.getScrollLeft=N,t.getScrollTop=_,t.getScrollHeight=I,t.getScrollWidth=R,t.getClientHeight=B,t.getClientWidth=M,t.getOffsetHeight=L,t.getOffsetWidth=D,t.getClientXY=O,t.setClientXY=X,t.getXY=H,t.setXY=F,t.getRelativeXY=Y,t.getPosX=V,t.getPosY=W,t.getWidth=G,t.getHeight=z,t.getSelection=Q,t.getSelectionText=U,t.getTextFieldSelection=j,t.getDocumentElement=et,t.getDocHead=nt,t.contains=q,t.getHref=K}),Jx().$package(function(e){var t=function(){function e(u,d){d=d||document;var h=/^[\w\-_#]+$/.test(u);if(!h&&d.querySelectorAll)return t(d.querySelectorAll(u));if(u.indexOf(",")>-1){for(var p=u.split(/,/g),f=[],m=0,g=p.length;g>m;++m)f=f.concat(e(p[m],d));return c(f)}var v,y=u.match(a),A=y.pop(),b=(A.match(s)||l)[1],x=!b&&(A.match(r)||l)[1],S=!b&&(A.match(o)||l)[1];if(x&&!S&&d.getElementsByClassName)v=t(d.getElementsByClassName(x));else if(v=!b&&t(d.getElementsByTagName(S||"*")),x&&(v=i(v,"className",RegExp("(^|\\s)"+x+"(\\s|$)"))),b){var w=d.getElementById(b);return w?[w]:[]}return y[0]&&v[0]?n(y,v):v}function t(e){try{return Array.prototype.slice.call(e)}catch(t){for(var n=[],i=0,a=e.length;a>i;++i)n[i]=e[i];return n}}function n(e,t,i){var a=e.pop();if(">"===a)return n(e,t,!0);var c,u,d,h=[],p=-1,f=(a.match(s)||l)[1],m=!f&&(a.match(r)||l)[1],g=!f&&(a.match(o)||l)[1],v=-1;for(g=g&&g.toLowerCase();c=t[++v];){u=c.parentNode;do if(d=!g||"*"===g||g===u.nodeName.toLowerCase(),d=d&&(!f||u.id===f),d=d&&(!m||RegExp("(^|\\s)"+m+"(\\s|$)").test(u.className)),i||d)break;while(u=u.parentNode);d&&(h[++p]=c)}return e[0]&&h[0]?n(e,h):h}function i(e,t,n){for(var i,a=-1,r=-1,s=[];i=e[++a];)n.test(i[t])&&(s[++r]=i);return s}var a=/(?:[\w\-\\.#]+)+(?:\[\w+?=([\'"])?(?:\\\1|.)+?\1\])?|\*|>/gi,r=/^(?:[\w\-_]+)?\.([\w\-_]+)/,s=/^(?:[\w\-_]+)?#([\w\-_]+)/,o=/^([\w\*\-_]+)/,l=[null,null],c=function(){var e=+new Date,t=function(){var t=1;return function(n){var i=n[e],a=t++;return i?!1:(n[e]=a,!0)}}();return function(n){for(var i,a=n.length,r=[],s=-1,o=0;a>o;++o)i=n[o],t(i)&&(r[++s]=i);return e+=1,r}}();return e}();e.dom.mini=t}),Jx().$package(function(e){var t,n,i,a,r,s,o,l,c,u,d,h,p,f,m=[];e.event=e.event||{},t=e.event,f=function(t,n){t||(t=window.event);var n=n||t.srcElement,i=document,a=i.documentElement,r=i.body,s={_event:t,type:t.type,target:t.srcElement,currentTarget:n,relatedTarget:t.fromElement?t.fromElement:t.toElement,eventPhase:t.srcElement==n?2:3,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY,layerX:t.offsetX,layerY:t.offsetY,pageX:t.clientX+(a&&a.scrollLeft||r&&r.scrollLeft||0)-(a&&a.clientLeft||r&&r.clientLeft||0),pageY:t.clientY+(a&&a.scrollTop||r&&r.scrollTop||0)-(a&&a.clientTop||r&&r.clientTop||0),wheelDelta:t.wheelDelta,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,charCode:t.keyCode,keyCode:t.keyCode,stopPropagation:function(){this._event.cancelBubble=!0},preventDefault:function(){this._event.returnValue=!1}},o=t.type.toLowerCase();if("mouseover"==o?s.relatedTarget=t.fromElement:"mouseout"==o&&(s.relatedTarget=t.toElement),!e.isUndefined(t.button)){var l=t.button,c={0:-1,1:0,2:2,3:-1,4:1};s.button=e.isUndefined(c[l])?l:c[l]}return s},e.browser.ie?(n=function(e,t,n,a){return s["on"+t]?(s["on"+t](e,t,n,a),void 0):(i(e,t,n),void 0)},i=function(e,n,i){if(-1==t._find(arguments)){var a=function(t){var n=f(t,e);Function.prototype.call?i.call(e,n):(e._currentHandler=i,e._currentHandler(n),e._currentHandler=null)};e.attachEvent("on"+n,a);var r={element:e,eventType:n,handler:i,wrappedEvent:a},s=e.document||e,o=s.parentWindow||window,l=t._uid();o._allHandlers||(o._allHandlers={}),o._allHandlers[l]=r,e._handlers||(e._handlers=[]),e._handlers.push(l),o._onunloadEventRegistered||(o._onunloadEventRegistered=!0,o.attachEvent("onunload",t._removeAllEvents))}},a=function(e,t,n){return s["off"+t]?(s["off"+t](e,t,n),void 0):(3==arguments.length?r(e,t,n):r(e,t),void 0)},r=function(e){var n=t._find(arguments);if(-1!=n){for(var i=e.document||e,a=i.parentWindow||window,r=0;n.length>r;r++){var s=n[r],o=e._handlers[s],l=a._allHandlers[o];e.detachEvent("on"+l.eventType,l.wrappedEvent),e._handlers[s]=null,e._handlers.splice(s,1),delete a._allHandlers[o]}e._handlers&&0==e._handlers.length&&(e._handlers=null)}},t._find=function(e){var t=e[0],n=e[1],i=e[2],a=t._handlers;if(!a)return-1;var r=t.document||t,s=r.parentWindow||window,o=[];if(3===e.length)for(var l=a.length-1;l>=0;l--){var c=a[l],u=s._allHandlers[c];if(u.eventType==n&&u.handler==i)return o.push(l),o}else if(2===e.length){for(var l=a.length-1;l>=0;l--){var c=a[l],u=s._allHandlers[c];u.eventType==n&&o.push(l)}if(o.length>0)return o}else if(1===e.length){for(var l=a.length-1;l>=0;l--)o.push(l);if(o.length>0)return o}return-1},t._removeAllEvents=function(){var e,t=this;for(e in t._allHandlers){var n=t._allHandlers[e];n.element.detachEvent("on"+n.eventType,n.wrappedEvent),n.element._handlers=null,delete t._allHandlers[e]}},t._counter=0,t._uid=function(){return"h"+t._counter++}):document.addEventListener&&(n=function(e,t,n,a){return s["on"+t]?(s["on"+t](e,t,n,a),void 0):(i(e,t,n),void 0)},i=function(t,n,i){var a=!1;t||e.out("targetModel undefined:"+n+i),t._eventTypes||(t._eventTypes={}),t._eventTypes[n]||(t._eventTypes[n]=[]),t.addEventListener(n,i,!1);for(var r=t._eventTypes[n],s=0;r.length>s;s++)if(r[s]==i){a=!0;break}a||r.push(i)},a=function(e,t,n){return s["off"+t]?(s["off"+t](e,t,n),void 0):(3==arguments.length?r(e,t,n):r(e,t),void 0)},r=function(e,t,n){if(t){if(3==arguments.length){if(n&&(e.removeEventListener(t,n,!1),e._eventTypes&&e._eventTypes[t]))for(var i=e._eventTypes[t],a=0;i.length>a;a++)if(i[a]===n){i[a]=null,i.splice(a,1);break}}else if(e._eventTypes&&e._eventTypes[t]){for(var i=e._eventTypes[t],a=0;i.length>a;a++)e.removeEventListener(t,i[a],!1);e._eventTypes[t]=[]}}else if(e._eventTypes){var r=e._eventTypes;for(var s in r)for(var i=e._eventTypes[s],a=0;i.length>a;a++)e.removeEventListener(s,i[a],!1);r={}}}),s={ondrag:function(n,i,a){var r,s,o,l=!1,c=function(i){if(e.browser.mobileSafari||0===i.button){var a;o=i,e.browser.mobileSafari?(i.stopPropagation(),a=i.touches[0],r=a.pageX,s=a.pageY):(i.stopPropagation(),"image"===i.target.getAttribute("eltype")&&i.preventDefault(),r=i.clientX,s=i.clientY),l=!1,e.browser.mobileSafari?(t.addEventListener(document,"touchmove",u),t.addEventListener(n,"touchend",d)):t.addEventListener(document,"mousemove",u)}},u=function(i){if(e.browser.mobileSafari||0===i.button){var c,h,p;i.stopPropagation(),e.browser.mobileSafari?(p=i.changedTouches[0],c=p.pageX,h=p.pageY):(c=i.clientX,h=i.clientY),Math.abs(r-c)+Math.abs(s-h)>2&&(e.browser.mobileSafari?(t.removeEventListener(document,"touchmove",u),t.removeEventListener(n,"touchend",d)):t.removeEventListener(document,"mousemove",u),l||(a.call(n,i,o),l=!0))}},d=function(n){(e.browser.mobileSafari||0===n.button)&&(e.browser.mobileSafari?(t.removeEventListener(document,"touchmove",u),l&&(n.stopPropagation(),n.preventDefault())):t.removeEventListener(document,"mousemove",u))};e.browser.mobileSafari?t.addEventListener(n,"touchstart",c):(t.addEventListener(n,"mousedown",c),t.addEventListener(n,"mouseup",d)),m.push({element:n,eventType:i,handler:a,actions:[c,d]})},offdrag:function(n,i,a){for(var r in m)if(m[r].handler==a&&m[r].element==n&&m[r].eventType==i){e.browser.mobileSafari?(t.removeEventListener(n,"touchstart",m[r].actions[0]),t.removeEventListener(n,"touchend",m[r].actions[1])):(t.removeEventListener(n,"mousedown",m[r].actions[0]),t.removeEventListener(n,"mouseup",m[r].actions[1])),m.splice(r,1);break}},oncustomclick:function(n,i,a,r){var s,o,l,c=!1,u=!1,d=0,r=r?r:{},h=r.longtouchable,p=-1,f=function(i){if(d=i.timeStamp,c=!1,e.browser.mobileSafari||0===i.button){var r;e.browser.mobileSafari?(r=i.changedTouches[0],s=r.pageX,o=r.pageY):(s=i.clientX,o=i.clientY),u=!1,h&&(l=setTimeout(function(){if(!c&&!u){var r=2e3;e.browser.mobileSafari?(t.removeEventListener(n,"touchmove",v),t.removeOriginalEventListener(n,"touchend",y)):(t.removeEventListener(n,"mousemove",v),t.removeOriginalEventListener(n,"click",y)),a.call(n,i,r)}},1e3)),e.browser.mobileSafari?(t.addEventListener(n,"touchmove",v),t.addOriginalEventListener(n,"touchend",y)):(t.addEventListener(n,"mousemove",v),t.addOriginalEventListener(n,"click",y))}},g=function(t){p=t.button,(e.browser.mobileSafari||0===t.button)&&e.browser.mobileSafari&&(touch=t.changedTouches[0],touch.pageX,touch.pageY)},v=function(i){if(e.browser.mobileSafari){touch=i.changedTouches[0];var a=touch.pageX,r=touch.pageY}else var a=i.clientX,r=i.clientY;c=Math.abs(s-a)+Math.abs(o-r)>1,c&&(clearTimeout(l),l=null,e.browser.mobileSafari?(t.removeEventListener(n,"touchmove",v),t.removeOriginalEventListener(n,"touchend",y)):(t.removeEventListener(n,"mousemove",v),t.removeOriginalEventListener(n,"click",y)))},y=function(t){if(clearTimeout(l),l=null,u=!0,e.browser.mobileSafari||0===p){var i,r=0;if(e.browser.mobileSafari){i=t.changedTouches[0];var d=i.pageX,h=i.pageY}else var d=t.clientX,h=t.clientY;1>Math.abs(s-d)+Math.abs(o-h)&&(c=!1,a.call(n,t,r))}};e.browser.mobileSafari?t.addEventListener(n,"touchstart",f):(t.addEventListener(n,"mousedown",f),t.addEventListener(n,"mouseup",g)),m.push({element:n,eventType:i,handler:a,actions:[f,v,g,y]})},offcustomclick:function(n,i,a){for(var r in m)if(m[r].handler==a&&m[r].element==n&&m[r].eventType==i){e.browser.mobileSafari?(t.removeEventListener(n,"touchstart",m[r].actions[0]),t.removeEventListener(n,"touchmove",m[r].actions[1]),t.removeOriginalEventListener(n,"touchend",m[r].actions[3])):(t.removeEventListener(n,"mousedown",m[r].actions[0]),t.removeEventListener(n,"mousemove",m[r].actions[1]),t.removeEventListener(n,"mouseup",m[r].actions[2]),t.removeOriginalEventListener(n,"click",m[r].actions[3])),m.splice(r,1);break}},oncontextmenu:function(n,i,a){if(9==e.browser.ie){var r=function(e){var t=f(e,n);a.call(n,t)};n.attachEvent("oncontextmenu",r),m.push({element:n,eventType:i,handler:a,actions:[r]})}else t.addOriginalEventListener(n,i,a)},offcontextmenu:function(n,i,a){if(9==e.browser.ie){for(var r in m)if(m[r].handler==a&&m[r].element==n&&m[r].eventType==i){n.detachEvent("oncontextmenu",m[r].actions[0]),m.splice(r,1);break}}else t.removeOriginalEventListener(n,i,a)},onmousewheel:function(n,i,a){if(e.browser.firefox){var r=function(e){e.wheelDelta=-40*e.detail,a.call(n,e)};t.addOriginalEventListener(n,"DOMMouseScroll",r),m.push({element:n,eventType:i,handler:a,actions:[r]})}else t.addOriginalEventListener(n,"mousewheel",a)},offmousewheel:function(n,i,a){if(e.browser.firefox){for(var r in m)if(m[r].handler==a&&m[r].element==n&&m[r].eventType==i){t.removeOriginalEventListener(n,"DOMMouseScroll",m[r].actions[0]),m.splice(r,1);break}}else t.removeOriginalEventListener(n,"mousewheel",a)},onmouseenter:function(e,n,i){var a=function(e){var t=e.relatedTarget;if(t)if(this.compareDocumentPosition){var n=this.compareDocumentPosition(t);t!=this&&20!=n&&0!=n&&i.call(this,e)}else t==this||this.contains(t)||i.call(this,e);else i.call(this,e)};t.addEventListener(e,"mouseover",a),m.push({element:e,eventType:n,handler:i,actions:[a]})},offmouseenter:function(e,n,i){for(var a in m)if(m[a].handler==i&&m[a].element==e&&m[a].eventType==n){t.removeEventListener(e,"mouseover",m[a].actions[0]),m.splice(a,1);break}},onmouseleave:function(e,n,i){var a=function(e){var t=e.relatedTarget;if(t)if(this.compareDocumentPosition){var n=this.compareDocumentPosition(t);20!=n&&0!=n&&i.call(this,e)}else this.contains(t)||i.call(this,e);else i.call(this,e)};t.addEventListener(e,"mouseout",a),m.push({element:e,eventType:n,handler:i,actions:[a]})},offmouseleave:function(e,n,i){for(var a in m)if(m[a].handler==i&&m[a].element==e&&m[a].eventType==n){t.removeEventListener(e,"mouseout",m[a].actions[0]),m.splice(a,1);break}},oninput:function(n,i,a){if(e.browser.ie){var r=function(e){if("value"==e.propertyName.toLowerCase()){var t=f(e,n);a.call(n,t)}};n.attachEvent("onpropertychange",r),m.push({element:n,eventType:i,handler:a,actions:[r]}),9==e.browser.ie&&t.addOriginalEventListener(n,"change",a)}else t.addOriginalEventListener(n,"input",a)},offinput:function(n,i,a){if(e.browser.ie){for(var r in m)if(m[r].handler==a&&m[r].element==n&&m[r].eventType==i){n.detachEvent("onpropertychange",m[r].actions[0]),m.splice(r,1);break}9==e.browser.ie&&t.removeOriginalEventListener(n,"change",a)}else t.removeOriginalEventListener(n,"input",a)}},o=function(e){return o.done?e():(o.timer?o.ready.push(e):(o.ready=[e],t.on(window,"load",l),o.timer=window.setInterval(l,300)),void 0)},l=function(){if(o.done)return!0;if(document&&document.getElementsByTagName&&document.getElementById&&document.body){o.done=!0,window.clearInterval(o.timer),o.timer=null;for(var e=0;o.ready.length>e;e++)o.ready[e]();return o.ready=null,!0}},c=function(){this.subscribers=[]},c.prototype.subscribe=function(t){var n=e.array.some(this.subscribers,function(e){return e===t});return n||this.subscribers.push(t),t},c.prototype.deliver=function(t){e.array.forEach(this.subscribers,function(e){e(t)})},c.prototype.unsubscribe=function(t){return this.subscribers=e.array.filter(this.subscribers,function(e){return e!==t}),t},u=function(t,n,i){var a,r,s,o;if(i){for(n="on"+n,t._$events||(t._$events={}),t._$events[n]?0==t._$events[n].length&&(t._$events[n]=[]):t._$events[n]=[],a=t._$events[n],r=a.length,s=-1,o=0;r>o;o++){var l=a[o];if(l==i){s=o;break}}-1===s&&a.push(i)}else e.out(">>> 添加的观察者方法不存在："+t+n+i)},d=function(e){var t=e.targetModel,n=e.eventMapping;for(var i in n)u(t,i,n[i])};var g=function(e){return[].slice.call(e)};h=function(e,t){var n,i,a;t="on"+t;var r=!0;if(e._$events&&e._$events[t]&&(n=e._$events[t],n.length>0))for(i=g(arguments).slice(2),a=0;n.length>a;a++)n[a].apply(e,i)===!1&&(r=!1);return r},p=function(e,t,n){var i,a,r,s=!1,o=e._$events;if(n){if(o&&(t="on"+t,a=o[t]))for(r=a.length,i=0;r>i;i++)if(a[i]==n){a[i]=null,a.splice(i,1),s=!0;break}}else if(t){if(o&&(t="on"+t,a=o[t])){for(r=a.length,i=0;r>i;i++)a[i]=null;delete o[t],s=!0}}else if(e&&o){for(i in o)delete o[i];delete e._$events,s=!0}return s},t.addEventListener=n,t.removeEventListener=a,t.addOriginalEventListener=i,t.removeOriginalEventListener=r,t.on=t.addEventListener,t.off=t.removeEventListener,t.onDomReady=o,t.Publish=c,t.customEvent=s,t.customEventHandlers=m,t.addObserver=u,t.addObservers=d,t.notifyObservers=h,t.removeObserver=p}),Jx().$package(function(e){var t=window.location.host;e.cookie={set:function(e,n,i,a,r){if(r){var s=new Date,o=new Date;o.setTime(s.getTime()+36e5*r)}return window.document.cookie=e+"="+n+"; "+(r?"expires="+o.toGMTString()+"; ":"")+(a?"path="+a+"; ":"path=/; ")+(i?"domain="+i+";":"domain="+t+";"),!0},get:function(e){var t=RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),n=window.document.cookie.match(t);return n?n[1]:""},remove:function(e,n,i){window.document.cookie=e+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; "+(i?"path="+i+"; ":"path=/; ")+(n?"domain="+n+";":"domain="+t+";")}}}),Jx().$package(function(e){e.localStorage={setItem:function(e,t){this.isSupports()&&window.localStorage.setItem(e,t)},getItem:function(e){return this.isSupports()?window.localStorage.getItem(e):null},removeItem:function(e){this.isSupports()&&window.localStorage.removeItem(e)},clear:function(){this.isSupports()&&window.localStorage.clear()},isSupports:function(){return"localStorage"in window&&null!==window.localStorage}}}),Jx().$package(function(e){e.array=e.array||{};var t,n,i,a,r,s,o,l,c,u,d,h,p,f,m,g,v,y,A,b=e.array;t=Array.prototype.indexOf?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.indexOf.apply(arguments[0],e)}:function(e,t,n){null==n?n=0:0>n&&(n=Math.max(0,e.length+n));for(var i=n;e.length>i;i++)if(e[i]===t)return i;return-1},n=Array.prototype.lastIndexOf?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.lastIndexOf.apply(arguments[0],e)}:function(e,t,n){null==n?n=e.length-1:0>n&&(n=Math.max(0,e.length+n));for(var i=n;i>=0;i--)if(e[i]===t)return i;return-1},i=Array.prototype.forEach?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.forEach.apply(arguments[0],e)}:function(e,t){var n=e.length;if("function"!=typeof t)throw new TypeError;for(var i=arguments[2],a=0;n>a;a++)a in e&&t.call(i,e[a],a,e)},a=Array.prototype.filter?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.filter.apply(arguments[0],e)}:function(e,t){var n=e.length;if("function"!=typeof t)throw new TypeError;for(var i=[],a=arguments[2],r=0;n>r;r++)if(r in e){var s=e[r];t.call(a,s,r,e)&&i.push(s)}return i},r=Array.prototype.some?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.some.apply(arguments[0],e)}:function(e,t){var n=e.length;if("function"!=typeof t)throw new TypeError;for(var i=arguments[2],a=0;n>a;a++)if(a in e&&t.call(i,e[a],a,e))return!0;return!1},s=Array.prototype.map?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.map.apply(arguments[0],e)}:function(e,t){var n=e.length;if("function"!=typeof t)throw new TypeError;for(var i=Array(n),a=arguments[2],r=0;n>r;r++)r in e&&(i[r]=t.call(a,e[r],r,e));return i},o=Array.prototype.every?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.every.apply(arguments[0],e)}:function(e,t){var n=e.length;if("function"!=typeof t)throw new TypeError;for(var i=arguments[2],a=0;n>a;a++)if(a in e&&!t.call(i,e[a],a,e))return!1;return!0},l=Array.prototype.reduce?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.reduce.apply(arguments[0],e)}:function(e,t){var n=e.length>>>0;if("function"!=typeof t)throw new TypeError;if(0==n&&2==arguments.length)throw new TypeError;var i=0;if(arguments.length>=3)var a=arguments[2];else for(;;){if(i in e){a=e[i++];break}if(++i>=n)throw new TypeError}for(;n>i;i++)i in e&&(a=t.call(null,a,e[i],i,e));return a},c=Array.prototype.reduceRight?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.reduceRight.apply(arguments[0],e)}:function(e,t){var n=e.length>>>0;if("function"!=typeof t)throw new TypeError;if(0==n&&2==arguments.length)throw new TypeError;var i=n-1;if(arguments.length>=3)var a=arguments[2];else for(;;){if(i in e){a=e[i--];break}if(0>--i)throw new TypeError}for(;i>=0;i--)i in e&&(a=t.call(null,a,e[i],i,e));return a},u=function(t){var n=e.$typeof(t);return n?"array"!=n&&"arguments"!=n?[t]:t:[]},d=function(e,t){var n,i,t=u(t),a=!1;for(n=0;t.length>n;n++)for(i=0;e.length>i;i++)e[i]===t[n]&&(e.splice(i,1),a=!0);return a},h=function(e,t,n){var i;for(i=0;e.length>i;ij++)if(e[i]===t)return e[i]=n,!0;return!1},p=function(e,t){t=t||function(e,t){return e-t};for(var n,i,a=e.length,r=0;a-1>r;r++){i=!1;for(var s=a-1;s>r;s--)0>t(e[s],e[s-1])&&(i=!0,n=e[s-1],e[s-1]=e[s],e[s]=n);if(!i)break}return e},f=function(e,t,n){for(var i=0,a=e.length,r=Math.floor(e.length/2);a!=r;)n(t,e[r])>0?i=r+1:a=r,r=Math.floor((i+a)/2);return r},m=function(e,n){return t(e,n)>-1},g=function(e){for(var t=[],n=0,i=e.length;i>n;n++)m(t,e[n])||t.push(e[n]);return t},v=function(e,t){for(var n=[],i=0,a=e.length;a>i;i++)m(t,e[i])&&n.push(e[i]);return n},y=function(e,t){for(var n=[],i=0,a=e.length;a>i;i++)m(t,e[i])||n.push(e[i]);return n},A=function(e,t){return g(e.concat(t))},b.indexOf=t,b.lastIndexOf=n,b.forEach=i,b.filter=a,b.some=r,b.map=s,b.every=o,b.reduce=l,b.reduceRight=c,b.toArray=u,b.remove=d,b.replace=h,b.bubbleSort=p,b.binarySearch=f,b.contains=m,b.uniquelize=g,b.intersect=v,b.minus=y,b.union=A}),Jx().$package(function(e){var t,n,i,a,r,s,o=e.dom.id,l=e.dom,c=e.event;window.XMLHttpRequest===void 0&&(window.XMLHttpRequest=function(){return new window.ActiveXObject(navigator.userAgent.indexOf("MSIE 5")>=0?"Microsoft.XMLHTTP":"Msxml2.XMLHTTP")}),e.http=e.http||{},t=function(e,t){var n,i,a,r=!1,s=!1;return t={method:t.method||"GET",data:t.data||null,arguments:t.arguments||null,onSuccess:t.onSuccess||function(){},onError:t.onError||function(){},onComplete:t.onComplete||function(){},onTimeout:t.onTimeout||function(){},isAsync:t.isAsync||!0,timeout:t.timeout?t.timeout:3e4,contentType:t.contentType?t.contentType:"utf-8",type:t.type||"xml"},e=e||"",a=t.timeout,n=new window.XMLHttpRequest,n.open(t.method,e,t.isAsync),n.setRequestHeader("Content-Type",t.contentType),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),i=function(e){try{return!e.status&&"file:"==location.protocol||e.status>=200&&300>e.status||304==e.status||navigator.userAgent.indexOf("Safari")>-1&&e.status===void 0}catch(t){}return!1},n.onreadystatechange=function(){if(4==n.readyState){if(!r){var a={};a.responseText=n.responseText,a.responseXML=n.responseXML,a.data=t.data,a.status=n.status,a.uri=e,a.arguments=t.arguments,i(n)?("script"===t.type&&eval.call(window,data),t.onSuccess(a)):t.onError(a),t.onComplete(a)}s=!0,n=null}},n.send(t.data),window.setTimeout(function(){var n;s||(r=!0,n={},n.uri=e,n.arguments=t.arguments,t.onTimeout(n),t.onComplete(n))},a),n},n=function(t,n){t=t||"",n={method:n.method||"GET",data:n.data||null,arguments:n.arguments||null,callback:n.callback||function(){},onLoad:n.onLoad||function(){},contentType:n.contentType?n.contentType:"utf-8"};var i;if(e.browser.ie){var a=new ActiveXObject("htmlfile");a.open(),a.close();var r=a.createElement("div");a.appendChild(r),a.parentWindow._parent=self,r.innerHTML='<iframe id="_cometIframe" src="'+t+"?callback=window.parent._parent."+n.callback+'"></iframe>',i=a.getElementById("_cometIframe")}else i=l.node("iframe"),i.setAttribute("id","_cometIframe"),i.setAttribute("src",t+"?callback=window.parent._parent."+n.callback),i.style.position="absolute",i.style.visibility="hidden",i.style.left=i.style.top="-999px",i.style.width=i.style.height="1px",document.body.appendChild(i),self._parent=self;
return c.on(i,"load",n.onLoad),i},i=function(t,n,a){var r,s,u,d,h,p,f,m,g=document.getElementsByTagName("head")?document.getElementsByTagName("head")[0]:document.documentElement,v=!1,y=!1,a=a||{},A=a.isDefer||!1,b=a.query||null,x=a.arguments||null,S=a.onSuccess||function(){},w=a.onError||function(){},P=a.onComplete||function(){},E=a.onTimeout||function(){},C=a.timeout,k=a.charset?a.charset:"utf-8",T=a.win||window;n=n||"",null!==b&&(n=n+"?"+b),m=function(){return i.Id++},d=m(),p=function(e){var t=o("jet_load_"+e);t&&g.removeChild(t)},s=function(e,t,n){var i=n||"utf-8";return l.node("link",{id:"jet_load_"+d,type:"text/css",charset:i,rel:"stylesheet",href:e},t)},u=function(e,t,n,i){var a=n||"utf-8",r=l.node("script",{id:"jet_load_"+d,type:"text/javascript",charset:a,src:e},t);return i&&r.setAttribute("defer","defer"),r},"script"===t?r=a.node||u(n,T,k,A):"css"===t&&(r=a.node||s(n,T,k)),e.browser.engine.trident&&9>parseInt(e.browser.ie)?r.onreadystatechange=function(){var e=this.readyState;("loaded"===e||"complete"===e)&&(r.onreadystatechange=null,v||(y=!0,window.clearTimeout(h),h=null,f={},f.id=d,f.uri=n,f.arguments=x,S(f),P(f)))}:e.browser.engine.webkit?c.on(r,"load",function(){var e;v||(y=!0,window.clearTimeout(h),h=null,e={},e.id=d,e.uri=n,e.arguments=x,S(e),P(e),"script"===t&&p(d))}):(r.onload=function(){var e;v||(y=!0,window.clearTimeout(h),h=null,e={},e.id=d,e.uri=n,e.arguments=a.arguments,S(e),P(e),"script"===t&&p(d))},r.onerror=function(e){var t;v||(y=!0,window.clearTimeout(h),h=null,t={},t.id=d,t.uri=n,t.arguments=x,t.error=e,w(t),P(t),p(d))}),a.node?"script"===t?r.src=n:"css"===t&&(r.href=n):g.appendChild(r),"script"===t&&C&&(h=window.setTimeout(function(){var e;y||(v=!0,e={},e.uri=n,e.arguments=x,E(e),P(e),p(d))},C));var I=function(e){this._node=e,this._head=g};return I.prototype={abort:function(){this._node.src="",this._head.removeChild(this._node),delete this._node}},new I(r)},i.Id=0,a=function(e,t){return i("css",e,t)},r=function(e,t){return i("script",e,t)};var u,d={_iframes:[],_tick:0,_select:function(){return this._tick++,this._iframes[(this._tick-1)%this._len]},init:function(e){if(1!=this._isInit){this._len=e;for(var t=document.body,n=0;e>n;n++)u=l.node("div",{"class":"RPCService_hDiv"}),l.hide(u),u.innerHTML='<iframe id="RPCService_hIframe_'+n+'" name="RPCService_hIframe_'+n+'" src="'+alloy.CONST.MAIN_URL+'domain.html"></iframe>',t.appendChild(u),this._iframes[n]=[u,null,"RPCService_hIframe_"+n];this._isInit=!0}},take:function(e){var t=this._select();t[1]&&t[0].removeChild(t[1]),e.setAttribute("target",t[2]),t[1]=e,t[0].appendChild(e)}};s=function(e,t){d.init(2);var n={method:t.method||"GET",enctype:t.enctype||"",data:t.data||{},onSuccess:t.onSuccess||function(){},onError:t.onError||function(){},onComplete:t.onComplete||function(){},onTimeout:t.onTimeout||function(){},timeout:t.timeout?t.timeout:1e4},i=l.node("form",{"class":"RPCService_form",method:n.method,action:e+"?t="+(new Date).getTime(),enctype:n.enctype});if(Object.prototype.toString.call(n.data).indexOf("String")>-1){var a=l.node("input");a.type="text",a.name=n.data,i.appendChild(a)}else for(var r in n.data){var a=l.node("input");a.type="text",a.name=r,a.setAttribute("value",n.data[r]),i.appendChild(a)}d.take(i),i.submit()},e.http.ajax=t,e.http.comet=n,e.http.load=i,e.http.loadCss=a,e.http.loadScript=r,e.http.formSend=s}),Jx().$package(function(e){e.string=e.string||{};var t,n,i,a,r,s,o,l,c,u,d,h,p,f,m,g,v,y,A,b,x,S,w,P,E,C,k,T,I,R,B,M,L,D,N,_,O,X,H,F,Y,V,W,G,z,Q=e.string;t=function(e){return e+""};var U={};n=function(e,t){var i=/\W/.test(e)?Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):U[e]=U[e]||n(document.getElementById(e).innerHTML);return t?i(t):i},i=function(e){return i.RE.test(e)},i.RE=/^(?:ht|f)tp(?:s)?\:\/\/(?:[\w\-\.]+)\.\w+/i,a=function(e){var t=null;if(null!==(t=a.RE.exec(e))){for(var n={},i=0,r=a.SPEC.length;r>i;i++){var s=a.SPEC[i];n[s]=t[i+1]}t=n,n=null}return t},r=function(e){for(var t="",n={},i={},r=0,s=a.SPEC.length;s>r;r++){var o=a.SPEC[r];if(e[o]){switch(o){case"scheme":i[o]="://";break;case"pass":n[o]=":";case"user":n.host="@";break;case"port":n[o]=":";break;case"query":n[o]="?";break;case"fragment":n[o]="#"}o in n&&(t+=n[o]),o in e&&(t+=e[o]),o in i&&(t+=i[o])}}return n=null,i=null,e=null,t},a.SPEC=["scheme","user","pass","host","port","path","query","fragment"],a.RE=/^([^:]+):\/\/(?:([^:@]+):?([^@]*)@)?(?:([^/?#:]+):?(\d*))([^?#]*)(?:\?([^#]+))?(?:#(.+))?$/,s=function(e){var t,n,i,e=e||window.location.href,a=e.indexOf("?"),r=e.substring(a+1).split("&"),s={};if(-1===a)return s;for(t=0;r.length>t;t++)try{if(a=r[t].indexOf("="),n=r[t].substring(0,a),i=r[t].substring(a+1),!(s[n]=unescape(i)))throw Error("uri has wrong query string when run mapQuery.")}catch(o){}return s},o=function(e,t,n){return("string"==typeof t?RegExp(t,n):t).test(e)},l=function(e,t,n){return n?(n+e+n).indexOf(n+t+n)>-1:e.indexOf(t)>-1},c=function(e){return(e+"").replace(/^\s+|\s+$/g,"")},u=function(e){return c(e.replace(/\s+/g," "))},d=function(e){return e.replace(/-\D/g,function(e){return e.charAt(1).toUpperCase()})},h=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.charAt(0).toLowerCase()})},p=function(e){return e.replace(/\b[a-z]/g,function(e){return e.toUpperCase()})},f=function(e){return e.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},m=function(e,t){return parseInt(e,t||10)},g=function(e){return parseFloat(e)},v=function(e){return(e+"").replace(/\r/gi,"").replace(/\n/gi,"")},y=function(e){return(e+"").replace(/&/gi,"&amp;").replace(/\\/gi,"&#92;").replace(/\'/gi,"&#39;").replace(/\"/gi,"&quot;").replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/ /gi,"&nbsp;").replace(/\r\n/g,"<br />").replace(/\n\r/g,"<br />").replace(/\n/g,"<br />").replace(/\r/g,"<br />")},A=function(e){return(e+"").replace(/\\/gi,"\\").replace(/\'/gi,"'").replace(/\"/gi,"'")},S=function(e,t){var n=e.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);return n?n.slice(1).hexToRgb(t):null},w=function(e,t){var n=e.match(/\d{1,3}/g);return n?n.rgbToHex(t):null},P=function(e,t){var n="",i=e.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,function(){return n+=arguments[1]+"\n",""});return t===!0?$exec(n):"function"==$type(t)&&t(n,i),i},b=function(e,t){return encodeURIComponent(e+"")+"="+encodeURIComponent(t+"")},x=function(e){var t=[];for(var n in e)t.push(b(n,e[n]));return t.join("&")},E=function(e,t,n){return e.replace(n||/\\?\{([^{}]+)\}/g,function(e,n){return"\\"==e.charAt(0)?e.slice(1):void 0!=t[n]?t[n]:""})},C=function(e,t,n,i){return RegExp.prototype.isPrototypeOf(t)?e.replace(t,n):e.replace(RegExp(t,i?"gi":"g"),n)},k=function(e,t){return t=t||2,e.replace(/[^\x00-\xff]/g,{2:"aa",3:"aaa"}[t]).length},T=function(e,t){return e.substring(0,e.length-t)},I=function(e,t){for(var n=e;k(n)>t;)n=T(n,1);return n},R=function(e){return-1!==e.search(/^\d+$/)?!0:!1},B=function(e){return-1!==e.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)?!0:!1};var M=function(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/</g,"&lt;"),e=e.replace(/"/g,"&quot;"),e=e.replace(/'/g,"&#39;")},L=function(e){return e=e.replace(/&amp;/g,"&"),e=e.replace(/&gt;/g,">"),e=e.replace(/&lt;/g,"<"),e=e.replace(/&quot;/g,'"'),e=e.replace(/&#39;/g,"'")},D=function(e){return e=e.replace(/&amp;/g,"&"),e=e.replace(/&gt;/g,">"),e=e.replace(/&lt;/g,"<"),e=e.replace(/\\\\"/g,'"'),e=e.replace(/\\\\'/g,"'")},N=function(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/</g,"&lt;"),e=e.replace(/"/g,"&quot;"),e=e.replace(/'/g,"&#39;"),e=e.replace(/=/g,"&#61;"),e=e.replace(/`/g,"&#96;")},O=function(e){return e.replace(/[&'"<>\/\\\-\x00-\x09\x0b-\x0c\x1f\x80-\xff]/g,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/ /g,"&nbsp;").replace(/\r\n/g,"<br />").replace(/\n/g,"<br />").replace(/\r/g,"<br />")},_=function(e){return e.replace(/[&'"<>\/\\\-\x00-\x1f\x80-\xff]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},X=function(e){return e+="",e.replace(/[\\"']/g,function(e){return"\\"+e}).replace(/%/g,"\\x25").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\x01/g,"\\x01")},H=function(e){return O(Y(escScript(e)))},F=function(e){return e.replace(/[\\\^\$\*\+\?\{\}\.\(\)\[\]]/g,function(e){return"\\"+e})},Y=function(e){return escape(e).replace(/\+/g,"%2B")},V=function(e){return e=encodeURIComponent(e),e=e.replace(/~/g,"%7E"),e=e.replace(/!/g,"%21"),e=e.replace(/\*/g,"%2A"),e=e.replace(/\(/g,"%28"),e=e.replace(/\)/g,"%29"),e=e.replace(/'/g,"%27"),e=e.replace(/\?/g,"%3F"),e=e.replace(/;/g,"%3B")},W=function(e){return/^(https?:\/\/)?[\w\-.]+\.(qq|paipai|soso|taotao)\.com($|\/|\\)/i.test(e)||/^[\w][\w\/\.\-_%]+$/i.test(e)||/^[\/\\][^\/\\]/i.test(e)?!0:!1},G=function(e){var e=encodeURI(e).replace(/(^\s*)|(\s*$)/g,""),t=/(^[a-zA-Z0-9]+[^.]):/,n=/^[\S.]+\.[\S.]+$/,i=/[\w.]+\/(\S*)/,a=/^[\s*]*javascript[\s*]*:/;return t.test(e)||n.test(e)?(t.test(e)||(e="http://"+e),i.test(e)||(e+="/"),a.test(e)&&(e="")):e="",e},z=function(t,n){var i=document.createElement("div");i.style.visibility="hidden",i.style.width="auto",n&&(i.style.fontSize=n+"px"),i.style.position="absolute",i.innerHTML=e.string.encodeHtmlSimple(t),document.body.appendChild(i);var a=i.offsetWidth;return document.body.removeChild(i),a},j=function(e,t,n){for(var i=e.length;i>=0;--i)if(e=e.substring(0,i),n>z(e,t))return e;return""};Q.cutByWidth=j,Q.toString=t,Q.template=n,Q.isURL=i,Q.parseURL=a,Q.buildURL=r,Q.mapQuery=s,Q.test=o,Q.contains=l,Q.trim=c,Q.clean=u,Q.camelCase=d,Q.hyphenate=h,Q.capitalize=p,Q.escapeRegExp=f,Q.toInt=m,Q.toFloat=g,Q.toSingleLine=v,Q.toHtml=y,Q.toTitle=A,Q.toQueryPair=b,Q.toQueryString=x,Q.hexToRgb=S,Q.rgbToHex=w,Q.stripScripts=P,Q.substitute=E,Q.replaceAll=C,Q.byteLength=k,Q.cutRight=T,Q.isNumber=R,Q.isEmail=B,Q.cutByBytes=I,Q.encodeHtmlSimple=M,Q.decodeHtmlSimple=L,Q.decodeHtmlSimple2=D,Q.encodeHtmlAttributeSimple=N,Q.encodeHtmlAttribute=_,Q.encodeHtml=O,Q.encodeScript=X,Q.encodeHrefScript=H,Q.encodeRegExp=F,Q.encodeUrl=Y,Q.encodeUriComponent=V,Q.vaildTencentUrl=W,Q.vaildUrl=G,Q.getCharWidth=z}),Jx().$package(function(J){var JSON={};(function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,a,r,s,o=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?l+"":"null";case"boolean":case"null":return l+"";case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,n=0;r>n;n+=1)s[n]=str(n,l)||"null";return a=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+o+"]":"["+s.join(",")+"]",gap=o,a}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;r>n;n+=1)i=rep[n],"string"==typeof i&&(a=str(i,l),a&&s.push(quote(i)+(gap?": ":":")+a));else for(i in l)Object.hasOwnProperty.call(l,i)&&(a=str(i,l),a&&s.push(quote(i)+(gap?": ":":")+a));return a=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+o+"}":"{"+s.join(",")+"}",gap=o,a}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,a=e[t];if(a&&"object"==typeof a)for(n in a)Object.hasOwnProperty.call(a,n)&&(i=walk(a,n),void 0!==i?a[n]=i:delete a[n]);return reviver.call(e,t,a)}var j;if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})})(),J.json=JSON}),Jx().$package(function(e){var t=(e.dom.id,e.dom),n=e.event;e.ui=e.ui||{};var i=0;e.ui.MaskLayer=new e.Class({_getMaskId:function(){return i++},init:function(i){i=i||{};var a=this._getMaskId(),r=this;this._initZIndex=i.zIndex=e.isUndefined(i.zIndex)?9e6:i.zIndex,this._initOpacity=i.opacity=e.isUndefined(i.opacity)?.5:i.opacity,i.appendTo=i.appendTo||document.body,i.className=i.className||"",this.option=i,this.container=t.node("div",{id:"ui_maskLayer_"+a,"class":"ui_maskLayer "+i.className});var s='<div id="ui_maskLayerBody_'+a+'" class="ui_maskLayerBody"></div>';e.browser.ie&&(s+='<iframe class="ui_maskBgIframe"></iframe>'),this.container.innerHTML=s,this.reset(),i.appendTo.appendChild(this.container);var o={onMaskLayerClick:function(){n.notifyObservers(r,"click",r)}};n.on(this.container,"click",o.onMaskLayerClick),this.body=t.id("ui_maskLayerBody_"+a)},getElement:function(){return this.container},append:function(e){this.body.appendChild(e)},show:function(){t.show(this.container),n.notifyObservers(this,"show"),this._isShow=!0},hide:function(){t.hide(this.container),n.notifyObservers(this,"hide"),this._isShow=!1},isShow:function(){return this._isShow},toggleShow:function(){this.isShow()?this.hide():this.show()},getZIndex:function(){return this._zIndex},setZIndex:function(e){t.setStyle(this.container,"zIndex",e),this._zIndex=e},setOpacity:function(e){t.setStyle(this.container,"opacity",e)},reset:function(){return this.setOpacity(this._initOpacity),this.setZIndex(this._initZIndex),this},fadeIn:function(){this.show()},fadeOut:function(){this.hide()},remove:function(){this.option.appendTo&&this.option.appendTo.removeChild(this.container)}})}),Jx().$package(function(e){var t,n,i,a,r,s,o,l,c,u=e.dom,d=e.event,h=function(e){e.preventDefault()},p=!1,f=!1,m=!1,g=!1,v=9e6;e.ui=e.ui||{},e.ui.ScrollDrag=new e.Class({init:function(y,A,b){var x,S,w,P,E,C=this;this.apperceiveEl=y,b=b||{},this.isLimited=b.isLimited||!1,this.dragType=b.dragType,this.isLocked=b.isLocked||!1,this.isLockCursorInScreen=b.isLockCursorInScreen||!1,this.checkTarget=b.checkTarget||null,this.setEffectElDynamicly=b.setEffectElDynamicly||null;var k=!1;this.isLimited&&(this._leftMargin=b.leftMargin||0,this._topMargin=b.topMargin||0,this._rightMargin=b.rightMargin||0,this._bottomMargin=b.bottomMargin||0),b.xOnly&&(this._xOnly=b.xOnly||!1),b.yOnly&&(this._yOnly=b.yOnly||!1),this.effectEl=A===!1?!1:A||y,b.listeners&&d.addObservers({targetModel:this,eventMapping:b.listeners}),this.dragStart=function(e){if(!(C.checkTarget&&!C.checkTarget(e)||C.setEffectElDynamicly&&(C.effectEl=C.setEffectElDynamicly(e),!C.effectEl))){if(e.changedTouches){if(e.changedTouches.length>1)return;e=e.changedTouches[0],document.body.style.WebkitTouchCallout="none"}else e.preventDefault(),e.stopPropagation();C.dragStartIn(e.pageX,e.pageY)}},this.dragStartIn=function(y,A){if(!C.isLocked){d.notifyObservers(C,"beforeStart",{effectEl:C.effectEl}),d.notifyObservers(document,"beforeStart",{effectEl:C.effectEl}),t=u.getClientWidth(),n=u.getClientHeight(),_workAreaClientWidth=b.clientEl?u.getClientWidth(b.clientEl):t,_workAreaClientHeight=b.clientEl?u.getClientHeight(b.clientEl):n,p=b.clientEl?u.getScrollWidth(b.clientEl):t,f=b.clientEl?u.getScrollHeight(b.clientEl):n,m=C.effectEl?parseInt(u.getClientWidth(C.effectEl)):0,g=C.effectEl?parseInt(u.getClientHeight(C.effectEl)):0,C.isLimited&&(i=p-m-C._rightMargin,a=C._leftMargin,r=C._topMargin,s=f-g-C._bottomMargin),c||(c=new e.ui.MaskLayer({opacity:0})),c.setZIndex(v),c.show();var k=C.effectEl?C.getPos(C.effectEl):{left:0,top:0};if(C._oldX=x=k.left,C._oldY=S=k.top,w=y,P=A,E=b.clientEl?u.getScrollTop(b.clientEl):0,e.browser.mobileSafari){d.on(document,"touchmove",C.dragMove),d.on(document,"touchend",C.dragStop);var T=new WebKitCSSMatrix(window.getComputedStyle(C.apperceiveEl).webkitTransform);o=y-T.m41,l=A-T.m42}else d.on(document,"mousemove",C.dragMove),d.on(document,"mouseup",C.dragStop);e.browser.ie&&d.on(document.body,"selectstart",h),e.browser.mobileSafari?d.notifyObservers(C,"start",{x:y,y:A,effectEl:C.effectEl}):d.notifyObservers(C,"start",{x:x,y:S,effectEl:C.effectEl})}},this.dragMove=function(c){if(!C.isLocked){c.browserEvent?(c.browserEvent.preventDefault(),c.browserEvent.stopPropagation()):(c.preventDefault(),c.stopPropagation()),c.changedTouches&&(c=c.changedTouches[0]);var h,p,f=c.pageX,m=c.pageY,v=b.clientEl?u.getScrollTop(b.clientEl):0;if(C.isLockCursorInScreen&&(0>f?f=0:f>t?f=t:0,0>m?m=0:m>n?m=n:0),e.browser.mobileSafari||(h=x+(f-w),p=S+(m-P)+(v-E)),C.isLimited&&(h>i&&!b.isOverRight&&(h=i),a>h&&!b.isOverLeft&&(h=a)),C._oldX===h||C._yOnly||(C._oldX=h,C.effectEl&&!e.browser.mobileSafari&&(C.effectEl.style.left=h+"px"),k=!0),C.isLimited){p>s&&!b.isOverBottom&&(p=s),r>p&&!b.isOverTop&&(p=r);var y=_workAreaClientHeight-g+u.getScrollTop(b.clientEl),A=u.getScrollTop(b.clientEl);if(p>=y)return p=y,d.notifyObservers(C,"overViewBorder",{dir:1,x:h,y:p,originEvent:c,effectEl:C.effectEl}),void 0;if(A>=p)return p=A,d.notifyObservers(C,"overViewBorder",{dir:-1,x:h,y:p,originEvent:c,effectEl:C.effectEl}),void 0}C._oldY===p||C._xOnly||(C._oldY=p,C.effectEl&&!e.browser.mobileSafari&&(C.effectEl.style.top=p+"px"),k=!0);var T=h,I=p;if(C.effectEl&&e.browser.mobileSafari){C._oldX=x+(f-w),C._oldY=S+(m-P);var R=m;h=C._yOnly?x:f-o,p=C._xOnly?S:R-l,C.effectEl.style.webkitTransform="translate3d("+h+"px, "+p+"px, 0px)",T=f,I=m}k&&d.notifyObservers(C,"move",{x:T,y:I,originEvent:c,effectEl:C.effectEl})}},this.dragStop=function(t){if(c.hide(),!C.isLocked){if(document.body.style.WebkitTouchCallout="auto",k||e.browser.mobileSafari){var n=C._oldX,o=C._oldY;C.isLimited&&(n>i&&!b.isOverRight&&(n=i),a>n&&!b.isOverLeft&&(n=a)),C.isLimited&&(o>s&&!b.isOverBottom&&(o=s),r>o&&!b.isOverTop&&(o=r)),e.browser.mobileSafari?(t.preventDefault(),b.noEndCallback&&C.effectEl&&(C.effectEl.style.webkitTransform="none",u.setStyle(C.effectEl,"left",n+"px"),u.setStyle(C.effectEl,"top",o+"px")),d.notifyObservers(C,"end",{x:n,y:o,originEvent:t.changedTouches[0],effectEl:C.effectEl})):d.notifyObservers(C,"end",{x:n,y:o,originEvent:t,effectEl:C.effectEl})}else d.notifyObservers(C,"end",{originEvent:t,effectEl:C.effectEl});if(C.isLimited&&(C.isOverRight||C.isOverLeft||C.isOverTop||C.isOverBottom)){var n=x+(t.pageX-w),o=S+(t.pageY-P),l=p-m-C._rightMargin,v=C._leftMargin,y=f-C._bottomMargin,A=C._topMargin;(n>l||v>n||o>y||A>o)&&d.notifyObservers(C,"overFlowBorder",{x:n,y:o,effectEl:C.effectEl})}p=!1,f=!1,m=!1,g=!1,e.browser.mobileSafari?(d.off(document,"touchmove",C.dragMove),d.off(document,"touchend",C.dragStop)):(d.off(document,"mousemove",C.dragMove),d.off(document,"mouseup",C.dragStop)),e.browser.ie&&d.off(document.body,"selectstart",h),k=!1}},d.on(this.apperceiveEl,"drag",this.dragStart)},setEffect:function(e){this.effectEl=e},lock:function(){this.isLocked=!0,d.off(this.apperceiveEl,"drag",this.dragStart)},unlock:function(){this.isLocked=!1,d.on(this.apperceiveEl,"drag",this.dragStart)},show:function(){u.show(this.apperceiveEl)},hide:function(){u.hide(this.apperceiveEl)},setLimite:function(e){e=e||{},this.isLimited=e.isLimited||!0,this.isLimited&&(this._leftMargin=e.leftMargin||0,this._topMargin=e.topMargin||0,this._rightMargin=e.rightMargin||0,this._bottomMargin=e.bottomMargin||0)},getPos:function(e){for(var t=["left","top"],n=["clientWidth","clientHeight"],i={},a=t.length;a--;){var r=u.getStyle(e,t[a]);if(-1!==r.indexOf("%")){for(var s=e.parentNode;s!==document.body||"static"===u.getStyle(s,"position")||""===u.getStyle(s,"position");)s=s.parentNode;r=parseInt(s[n[a]]*parseInt(r)/100)}else r=parseInt(r)||0;i[t[a]]=r}return i}})}),Jx().$package(function(e){var t=(e.dom,e.event);e.ui=e.ui||{},e.ui.xInput=new e.Class({init:function(n,i){this.element=n,i||(i={}),this.min=i.min||0,this.max=i.max||100,this.rate=i.rate||10,this.canBeFloat=i.canBeFloat||!1,this.accuracy=i.accuracy||2,this.suffix=i.suffix||"",this.step=i.step||1,this.maskLayer=i.maskLayer,this.onChange=i.onChange||null,this.onDragStart=i.onDragStart||null,this.onDragEnd=i.onDragEnd||null,this.onBlur=i.onBlur||null,this.mousedown=e.bind(this.mousedown,this),this.mousemove=e.bind(this.mousemove,this),this.mouseup=e.bind(this.mouseup,this),this.blur=e.bind(this.blur,this),this.element.style.cursor="n-resize",t.on(this.element,"mousedown",this.mousedown),t.on(this.element,"blur",this.blur)},checkValue:function(){var e=this.canBeFloat?parseFloat(this.element.value):parseInt(this.element.value);isNaN(e)?e=this.min:e>this.max?e=this.max:this.min>e&&(e=this.min),this.value=e,this.element.value=(this.canBeFloat?e.toFixed(this.accuracy):e)+this.suffix},mousedown:function(e){return this.checkValue(),this.lastValue=this.value,this.pointer={left:e.pageX,top:e.pageY},this.maskLayer.show(),t.on(document,"mousemove",this.mousemove),t.on(document,"mouseup",this.mouseup),this.onDragStart&&this.onDragStart(),this.mousemove(e),this.isDragging=!0,!1},mousemove:function(e){var t=this.value;return t-=(e.pageY-this.pointer.top)*this.step/this.rate,this.canBeFloat||(t=~~t),t>this.max?t=this.max:this.min>t&&(t=this.min),t!==this.lastValue&&(this.lastValue=t=this.canBeFloat?t.toFixed(this.accuracy):t,this.element.value=t+this.suffix,this.onChange&&this.onChange(t,this.element)),!1},mouseup:function(){return t.off(document,"mousemove",this.mousemove),t.off(document,"mouseup",this.mouseup),this.maskLayer.hide(),this.isDragging=!1,this.onDragEnd&&this.onDragEnd(),!1},blur:function(){this.checkValue(),this.onBlur&&this.onBlur(this.value,this.element)}})}),Jx().$package(function(e){e.dom,e.event,e.ui=e.ui||{},e.ui.FullScreen=new e.Class({init:function(){this._checkSupport(),this.isSupported&&this._checkFunc()},_checkSupport:function(){if(document.cancelFullScreen!==void 0)this.isSupported=!0,this.prefix="";else for(var e=["webkit","moz","o","ms","khtml"],t=0,n=e.length;n>t;t++)if(document[e[t]+"CancelFullScreen"]!==void 0){this.isSupported=!0,this.prefix=e[t];break}},_checkFunc:function(){this.fullScreenChangeEventName=this.prefix+"fullscreenchange",this.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},this.requestFullScreen=function(e){switch(e||(e=document.documentElement),this.prefix){case"":return e.requestFullScreen();case"webkit":return e.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);default:return e[this.prefix+"RequestFullScreen"]()}},this.cancelFullScreen=function(){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()}}})}),Jx().$package(function(e){var t=e.dom,n=function(e){var t,n=!0,i=0,a=0;return{getInfo:function(){if(n===!0)return n=!1,t=+new Date,{elapsedTime:0,coeff:0,FPS:0,averageFPS:0};var r=+new Date,s=r-t;t=r;var o=1e3/s;return a++,i+=o,{elapsedTime:s,coeff:e/o,FPS:o,averageFPS:i/a}},pause:function(){n=!0}}};e.ui=e.ui||{},e.ui.Fps=new e.Class({init:function(){var e='<div class="jxFpsPanel">					<p>FPS: <span class="jxFps"></span></p>					<p>Average FPS: <span class="jxAverFps"></span></p>					<p>Time Coefficient: <span class="jxCoeff"></span></p>				</div>';this.domPanel=t.xnode(e),this.domFps=t.mini(".jxFps",this.domPanel)[0],this.domAverFps=t.mini(".jxAverFps",this.domPanel)[0],this.domCoeff=t.mini(".jxCoeff",this.domPanel)[0],document.body.appendChild(this.domPanel),this.timer=n(60)},log:function(){var e=this.info=this.timer.getInfo();return this.domFps.innerHTML=Math.floor(e.FPS),this.domAverFps.innerHTML=Math.floor(e.averageFPS),this.domCoeff.innerHTML=e.coeff.toFixed(2),e},pause:function(){return this.timer.pause(),console.log("averageFPS: ",this.info.averageFPS),this}})});